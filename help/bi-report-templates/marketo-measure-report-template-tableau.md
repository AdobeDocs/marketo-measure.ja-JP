---
description: '"[!DNL Marketo Measure] レポートテンプレート — Tableau - [!DNL Marketo Measure]  — 製品ドキュメント»'
title: "[!DNL Marketo Measure] レポートテンプレート — Tableau"
exl-id: 18963be9-5c6e-4454-8244-b50460e2bed5
source-git-commit: 65e7f8bc198ceba2f873ded23c94601080ad0546
workflow-type: tm+mt
source-wordcount: '2332'
ht-degree: 0%

---

# [!DNL Marketo Measure] レポートテンプレート — Tableau {#marketo-measure-report-template-tableau}

## はじめに {#getting-started}

次にアクセス： [!DNL Tableau] レポートテンプレート [ここ](https://github.com/adobe/Marketo-Measure-BI-Templates){target=&quot;_blank&quot;}。

を開きます。 [!DNL Adobe Marketo] レポートテンプレート Tableau ワークブックファイルを測定します。

既存の接続データを特定の接続接続情報に更新する必要がありますSnowflake接続情報。 次をクリック： [!UICONTROL 接続を編集] ボタンをクリックし、 [[!UICONTROL データ接続]](#data-connection) 」の節を参照してください。

![](assets/marketo-measure-report-template-tableau-1.png)

## データ接続 {#data-connection}

Snowflakeインスタンスへのデータ接続を設定する必要があります。 この場合は、サーバー名とユーザー名およびパスワードが必要です。 必要に応じて、この情報の場所とパスワードのリセットに関する詳細がドキュメントに記載されています。 [ここ](/help/marketo-measure-data-warehouse/data-warehouse-access-reader-account.md){target=&quot;_blank&quot;}。

![](assets/marketo-measure-report-template-tableau-2.png)

また、最初の SQL コマンドを入力する必要があります。 このデータモデルでのカスタムクエリの使用をサポートします。 入力するコマンドは、「スキーマを使用」です。 `<your schema name>`&quot;. スキーマ名は、 [!UICONTROL データウェアハウス接続] ページ（上記のドキュメントを参照）。

![](assets/marketo-measure-report-template-tableau-3.png)

### カスタム SQL クエリ {#custom-sql-queries}

理由： [!DNL Tableau] フィルターが設定された個々のテーブルではなく、クエリ全体にデータソースフィルターを適用します。モデル内の各テーブルにカスタム SQL を使用するように選択しました。 これにより、削除された行とテーブルレベルでの重複行を除外できます。 例えば、データソースフィルターとして適用する場合は、session 。_deleted_date が null の場合は、クエリの where 句に追加され、次のクエリが生成されます。

**データソースに追加されたフィルター**

```
--A deleted session removes this row completely and the touchpoint data is lost. Select *
   From Touchpoint    tp
      join Session sn
      on tp.session_id = sn.session_id 
 Where tp._deleted_date is null
    and sn._deleted_date is null
```

ただし、セッションが削除されたが、対応するタッチポイントが削除されなかった場合、タッチポイントデータはデータセットから削除されるという誤った点です。 タッチポイントが削除されていないので、タッチポイントデータをデータセットに含めます。 カスタム SQL を追加すると、フィルター条件がテーブルレベルで適用され、次のクエリが実行されます。

**カスタム SQL を使用して適用されたフィルター**

```
--A deleted session only removes the session related data, and the touchpoint data is preserved. Select *
   From Touchpoint       tp
      join Session sn
      on tp.session_id          = sn.session_id 
      and sn._deleted_date      is null
  Where tp._deleted_date is null
```

## データ変換 {#data-transformations}

のデータには、いくつかの変換が適用されています [!DNL Tableau] Snowflakeの元の状態から これらの変換のほとんどは、 [!DNL Tableau] モデル。 テーブルの生成に使用するカスタム SQL を表示するには、テーブル名を右クリックし、「カスタム SQL クエリの編集」を選択します。 以下に、具体的な変換の一部を示します。

![](assets/marketo-measure-report-template-tableau-4.png)

![](assets/marketo-measure-report-template-tableau-5.png)

### 削除された列 {#removed-columns}

データモデルを簡素化し、冗長で不要なデータを削除するために、元のSnowflakeテーブルから Tableau に読み込まれる列の数を減らしました。 削除された列には、不要な外部キー、非正規化されたディメンションデータが含まれ、モデル内の他のテーブル、監査列、内部で使用されるフィールドとの関係を通じて、より有効に活用されます [!DNL Marketo Measure] 処理中。 カスタム SQL の「選択」セクションでインポートした列のリストを編集し、ビジネスニーズに応じて列を追加または削除できます。

>[!NOTE]
>
>Data Warehouse のほとんどのテーブルには、非正規化されたディメンションデータが含まれています。 でモデルを正規化してクリーンアップするように作業しました。 [!DNL Tableau] できる限りパフォーマンスとデータの正確性を向上させるために。 非正規化されたフィールドをファクトテーブルに追加する場合は注意が必要です。これにより、テーブル間のディメンションフィルタリングが壊れ、レポートが不正確になる可能性があります。

### 列名の変更 {#renamed-columns}

テーブルと列の名前は、よりユーザーにわかりやすい名前に変更され、命名規則を標準化するようになりました。 列名の変更を表示するには、テーブルを作成するカスタム SQL 文を参照します。

### 追加された行 {#rows-added}

モデルの計算に通貨換算機能を追加するために、商談テーブルとコストテーブルの両方に企業換算率列とターゲット換算率列を追加しました。 これらの列の値は行レベルで追加され、日付と通貨 ID の両方でコンバージョン率テーブルに結合して評価されます。 Tableau では facts テーブルで複数のディメンションテーブルを共有できないので、コンバージョン率はそのテーブルを使用するテーブルに直接追加されました。 このモデルでの通貨換算の仕組みについて詳しくは、 [通貨換算](#currency-conversion) の節を参照してください。

![](assets/marketo-measure-report-template-tableau-6.png)

2 つのテーブルがある場所はいくつかあります [!DNL Snowflake] を [!DNL Tableau] データモデル。 この場合、「タイプ」列が追加され、 [!DNL Snowflake] テーブルを取得し、行が表すエンティティを指定します。 組み合わされたテーブルの詳細については、このドキュメントの関係とデータフローの節を参照してください。

![](assets/marketo-measure-report-template-tableau-7.png)

### セグメント名 {#segment-names}

セグメント名はカスタマイズ可能なので、SnowflakeData Warehouse では汎用の列名が付けられます。 [!DNL BIZ_SEGMENT_NAMES] は、汎用セグメント名と、マッピング先のカスタマイズされたセグメント名 ( [!DNL Marketo Measure] UI カスタムセグメント名を使用している場合に、 [!DNL Tableau] モデルを組み込むには、このテーブルを使用し、Tableau モデル内の列の名前を手動で変更します。 セグメント列はリードおよび属性タッチポイントテーブルにあり、名前を変更する必要があるのは 1 回だけです。

この [!UICONTROL カテゴリ] 列にはカテゴリ番号がリストされ、SEGMENT_NAME 列にはマッピング先のカスタマイズ済みセグメント名が含まれます。

![](assets/marketo-measure-report-template-tableau-8.png)

名前は 2 つの方法で更新できます。 1 つ目のオプションは、カスタム SQL を更新することです。 この例では、 Categories 1 ～ 6 は、 Segment Names テーブルのマッピングに基づいて名前が変更されています。

![](assets/marketo-measure-report-template-tableau-9.png)

もう 1 つのオプションは、 [!DNL Tableau] 表。

![](assets/marketo-measure-report-template-tableau-10.png)

## データモデル {#data-model}

フルサイズ版の場合は、以下の画像をクリックしてください。

[![](assets/marketo-measure-report-template-tableau-11.png)](/help/bi-report-templates/assets/tableau-data-model.png){target=&quot;_blank&quot;}

### 関係とデータフロー {#relationships-and-data-flow}

タッチポイントの作成に使用されるイベントデータは、 [!UICONTROL セッション], [!UICONTROL タスク], [!UICONTROL イベント], [!UICONTROL アクティビティ]、および [!UICONTROL キャンペーンメンバー] テーブル。 これらのイベントテーブルは、それぞれの ID を介してタッチポイントテーブルに結合され、イベントの結果がタッチポイントになった場合は、詳細がタッチポイントテーブルに格納されます。

リードタッチポイントとアトリビューションタッチポイントは、このモデルで 1 つのテーブルに結合され、タッチポイントテーブルへのリンクが含まれます。 行がリードか属性かのタッチポイントかを示す「タッチポイントタイプ」列が追加されました。 リードおよびアトリビューションタッチポイントのほとんどのディメンションデータは、対応するタッチポイントへのリンクから提供されます。

商談ステージ遷移とリードステージ遷移は、このモデルの 1 つのテーブルに結合され、 [!UICONTROL リードと属性] タッチポイントテーブル。 行が商談かリードのステージ遷移かを示す「遷移タイプ」列が追加されました。

コストとタッチポイントの両方のデータは、チャネルディメンションと Campaign ディメンションを共有します。 ただし、Tableau はファクトテーブル間で共有ディメンションをモデル化する機能に制限があります。 共有ディメンションテーブルは 1 つだけに制限されるので、チャネルとキャンペーンのデータは 1 つのテーブルに結合されました。 これらは、2 つのディメンションのクロス結合を使用して、Tableau で 1 つのテーブルに結合されます。チャネルとキャンペーン。 一意の ID は、チャネルとキャンペーンの ID を連結して作成されます。 この同じ ID 値がタッチポイントテーブルとコストテーブルの両方に追加され、この結合されたディメンションテーブルとの関係が作成されます。

![](assets/marketo-measure-report-template-tableau-12.png)

このモデルでは、キャンペーンディメンションとチャネルディメンションがタッチポイントにリンクされているので、これらのディメンションに関するすべてのレポートはこのリンクを通じており、イベントデータに関するディメンションレポートが不完全な可能性があります。 これは、多くのイベントでは、タッチポイントへと処理されるまで、これらのディメンションへのリンクがないからです。

>[!NOTE]
>
>セッションなどの一部のイベントには、キャンペーンディメンションとチャネルディメンションへの直接リンクがあります。 これらのディメンションのセッションレベルでのレポートが必要な場合は、そのために別のデータモデルを作成することをお勧めします。

コストデータは、Snowflakeデータウェアハウスのコストテーブル内の様々な集計レベルで保存されます。 すべての広告プロバイダーについて、Campaign レベルのデータをチャネルレベルにロールアップできます。 この理由から、このモデルは「campaign_is_aggregatable_cost」フラグに基づいてコストデータを取り込みます。 自己報告されたコストは、チャネルレベルでのみ送信でき、Campaign データは必要ありません。 可能な限り正確なコストレポートを提供するために、自己報告されたコストは「channel_is_aggregatable_cost」フラグに基づいて取り出されます。 コストデータを読み込むクエリは、次のロジックを使用して記述されます。ad_provider = &quot;SelfReported&quot;の場合、 channel_is_aggregatable_cost = true、それ以外の場合、 campaign_is_aggregatable_cost = true。

このモデルのコンテキスト内では、リード [!UICONTROL 連絡先], [!UICONTROL アカウント]、および [!UICONTROL 商談] データはディメンションデータと見なされ、リードとアトリビューションのタッチポイントテーブルに直接結合されます。

### 通貨換算 {#currency-conversion}

コンバージョン率テーブルの率は、金額を会社通貨から換算するために必要な値を表します。 任意の通貨への換算では、最初に元の通貨から会社通貨に、次に会社通貨から選択した通貨に、二重換算が必要です。 モデルのこのチェーンの最初の手順は、これらのコンバージョン率を持つ 2 つの列を、商談とコストの金額を含むテーブルに追加することです。 これらの手順について詳しくは、このドキュメントの追加される行の節を参照してください。 コンバージョン率は静的である必要はなく、指定した日付範囲で変更される場合があるので、すべての通貨コンバージョンの計算は行レベルで実行する必要があります。 元の通貨から企業通貨への換算は、値を企業換算レートで割ってから、目標換算レートを掛けることで構成されます。 ターゲットの換算レートは、選択した通貨パラメータの値によって決定されます。

* 元の値を企業通貨価値に変換/企業換算レート=企業通貨での値
* 企業から選択した通貨値に企業通貨で値を変換します `*` 選択した通貨のコンバージョン率=選択した通貨の値

![](assets/marketo-measure-report-template-tableau-13.png)

換算レートが識別できない場合、このモデルの通貨換算メジャーは、レートの値を 1.0 に置き換えます。 メジャーの通貨値を表示する個別のメジャーが作成され、計算に複数の通貨値が含まれる場合（つまり、値を選択した通貨に変換できなかった場合）にアラートが表示されます。 これらの測定（コスト通貨と売上高通貨）は、コストまたは売上高データを表示する任意のビジュアルのツールチップとして表示されます。

![](assets/marketo-measure-report-template-tableau-14.png)

## データ定義 {#data-definitions}

定義が [!DNL Tableau model] パラメータ、カスタム列、測定の場合。

![](assets/marketo-measure-report-template-tableau-15.png)

直接移動元の列の定義を表示するには [!DNL Snowflake]詳しくは、 [data warehouse ドキュメント](/help/marketo-measure-data-warehouse/data-warehouse-schema.md){target=&quot;_blank&quot;}。

## テンプレートと Discover の相違 {#discrepancies-between-templates-and-discover}

### 起因する収益 {#attributed-revenue}

リードタッチポイントおよびアトリビューションタッチポイントは、元のタッチポイントからディメンションデータを継承します。 レポートテンプレートモデルは、すべての継承されたディメンションデータをタッチポイントとの関係からソースします。一方、Discover モデルでは、ディメンションデータはリードとアトリビューションのタッチポイントレコードに非正規化されます。 全体的な属性別売上高または属性別パイプライン売上高の値は、2 つのレポートの間で並ぶ必要があります。 ただし、売上高がディメンションデータ（チャネル、サブチャネル、キャンペーン）で分類またはフィルタリングされると、不一致が生じる場合があります。 ディメンションの売上高がテンプレートと Discover の間で一致しない場合は、テンプレートレポートデータセットに不足しているタッチポイントレコードが存在する可能性があります。 これは、リードまたは属性のタッチポイントレコードがあるが、レポートにインポートされたデータセット内のタッチポイントテーブルに対応するレコードがない場合に発生します。 これらのテーブルは変更日でフィルタリングされるので、リード/属性タッチポイントレコードがタッチポイントレコードよりも最近変更された可能性があり、元のタッチポイントレコードが変更されていない間にリード/属性タッチポイントがデータセットにインポートされます。 この問題を修正するには、タッチポイントテーブルのフィルターされた日付範囲を広げるか、または日付制約をすべて削除することを検討します。

>[!NOTE]
>
>タッチポイントは大きなテーブルなので、インポートする必要のあるデータの量に対して、より完全なデータセットのトレードオフを考慮します。

### コスト {#cost}

テンプレートのコストレポートは、キャンペーンレベルとチャネルレベルでのみ利用できますが、Discover では、一部の広告プロバイダー（クリエイティブ、キーワード、広告グループなど）に対して、より低い精度でレポートを提供しています。 テンプレートでのコストデータのモデル化の詳細については、 [!UICONTROL データモデル] 」の節を参照してください。 次元フィルターが [!UICONTROL Discover] がチャネルまたはキャンペーンに設定され、チャネル、サブチャネル、キャンペーンの各レベルでのコストが、Discover とレポートテンプレートの間で並ぶようになります。

### ROI {#roi}

ROI は属性売上高とコストから計算されるので、これらの計算で生じるのと同じ相違が ROI で生じる可能性があり、同じ理由で、これらの節で述べたように発生する可能性があります。

### タッチポイント {#touchpoints}

レポートテンプレートに示すように、これらの指標は Discover には反映されません。 現在、この 2 つの間の直接の比較はできません。

### ウェブトラフィック {#web-traffic}

レポートテンプレートデータモデルは、セッションとタッチポイントの間の関係を介して、チャネル、サブチャネル、キャンペーンのディメンションデータを正規化します。 これは、Discover データモデルとは異なります。Discover データモデルでは、これらのディメンションを Session に対して非正規化します。 この区別のため、訪問回数と訪問者数の全体的な数は、Discover とレポートテンプレートで一致する必要がありますが、ディメンションで表示またはフィルタリングすると、これらの数は一致しなくなります。 これは、テンプレートのディメンショナルデータが、タッチポイント（匿名以外のイベント）につながった Web イベントでのみ使用できるからです。 詳しくは、 [データモデル](#data-model) 」の節を参照してください。

の間の合計サイトフォーム数に多少の相違が生じる可能性があります。 [!DNL Discover] とテンプレート。 これは、レポートテンプレートのデータモデルが、セッションとタッチポイントの関係を介してサイトフォームのディメンションデータを取得するからです。サイトフォームのデータに相関性のあるセッションがない場合があります。

### リードとアカウント {#leads-and-accounts}

接触したアカウントのディメンショナルレポートは、次の点で少し異なる場合があります： [!DNL Discover] また、テンプレートでも、これは、タッチポイントとリードタッチポイントまたはアトリビューションタッチポイントの間の関係から来るディメンションモデリングが原因です。 詳しくは、属性売上高の節で説明されている詳細を参照してください。

のすべてのリード数 [!UICONTROL Discover] は属性付きのリード数であり、レポートテンプレートでは指標は次のようになります。 [!UICONTROL リード] 触れた。 したがって、この測定に関して 2 つのレポート間で直接比較することはできません。

### エンゲージメントパス {#engagement-path}

直接の比較は行われていない [!UICONTROL エンゲージメントパス] レポート [!DNL Discover] とテンプレート。 のレポート [!DNL Discover] はタッチポイントをモデル化しているのに対して、テンプレートのレポートはアトリビューションタッチポイントをモデル化しています。 テンプレートでは、すべてのタッチポイントデータを表示するのではなく、オポチュニティとその関連するタッチポイントのみに焦点を当てています。

### 契約速度 {#deal-velocity}

テンプレート内のこのレポートと、Discover の Velocity ダッシュボード上の Deal Velocity タイルとの間に矛盾はありません。
